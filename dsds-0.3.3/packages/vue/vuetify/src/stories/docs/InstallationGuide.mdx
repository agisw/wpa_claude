import { Meta, Unstyled } from "@storybook/addon-docs/blocks";
import { Callout } from "@docs/helpers/vue"
import { VTabsContainer as Tabs, VTabs as TabsList, VTab, VTab as TabsTrigger, VTabsWindow as TabsContents, VTabsWindowItem, VTabsWindowItem as TabsContent } from "../../components/ui";

<Meta title="Getting Started/Installation" />

# 설치 방법

## 사전 준비

- Node.js v20 이상을 설치하세요.
- `pnpm` 을 설치하시면 더 쾌적하게 개발이 가능합니다.


### `pnpm` 설치하기

`npm`에 비해 [저장공간을 매우 적게 사용하며 성능이 5배 이상 빠른](https://pnpm.io/ko/motivation) `pnpm` 을 추천합니다.

```bash
corepack use pnpm
```

<Callout kind="warning">
  사내에서 SSL 이슈로 `corepack use` 명령이 동작하지 않을 경우 다음 방법으로 설치하세요.

  ```bash
  npm install -g pnpm
  ```
</Callout>


### `@dsds` 레포지터리 등록하기

다음 명령을 실행해서 `@dsds` 레지스트리를 추가해주세요.

```bash
npm config set @dsds:registry https://npm.mwebdev.samsungds.net/
npm config set noproxy repo.samsungds.net,artifact.samsungds.net,npm.mwebdev.samsungds.net
npm config set strict-ssl false
```

## 패키지 설치 및 셋업하기

<Tabs defaultValue="new-project">
  <TabsList variant="default" size="medium">
    <TabsTrigger value="new-project">새 프로젝트 생성하기</TabsTrigger>
    <TabsTrigger value="edit-project">기존 프로젝트에 추가하기</TabsTrigger>
  </TabsList>

  <TabsContents>
    <TabsContent value="new-project">
      ```bash
      pnpm create @dsds --template=vuetify my-app
      ```

      <Callout kind="warning">
        Powershelll 에서는 `@dsds`를 따옴표로 감싸야 합니다.
        ```Powershelll
        pnpm create "@dsds" --template=vuetify my-app
        ```
      </Callout>

      위 명령을 실행하면, `my-app` 디렉터리에 DSDS 기반의 Vite React 프로젝트가 생성됩니다.

      이 명령은 `my-app` 디렉터리를 생성하고, 필요한 의존성을 설치하며, 기본적인 파일 구조를 설정합니다.

      **참고: 추가되는 의존성**

      - `@dsds/vue-vuetify`: DSDS 컴포넌트 라이브러리
      - `@dsds/fonts`: DSDS 폰트 패키지
      - `tailwindcss`: CSS 프레임워크
    </TabsContent>

    <TabsContent value="edit-project">
      **1. `@dsds/vue-vuetify` 패키치 설치하기**

      ```bash
      pnpm add @dsds/vue-vuetify @dsds/fonts
      ```

      **2. tailwincsss 설치하기 (추천 선택사항)**

      [tailwindcss 공식가이드](https://tailwindcss.com/docs/installation/using-vite)를 참고하여 tailwindcss를 셋업합니다.

      ```bash
      pnpm add tailwindcss @tailwindcss/vite
      ```

      **3. `vite.config.mts` 수정**
      ```ts
      // ...
      import tailwindcss from '@tailwindcss/vite'

      // https://vite.dev/config/
      export default defineConfig({
        plugins: [
          // 기존 플러그인들...
          tailwindcss(),
        ]
      })
      ```

      **4. `src/index.css` 추가 (또는 기존 `style.css` 편집) 및 `main.ts` 에 포함하기**

      `src/index.css` (또는  `src/style.css`) 파일을 생성하시거나 기존 파일을 열어서 다음 내용을 추가합니다.

      ```css
      @import "tailwindcss";

      @import "@dsds/fonts";
      @import "@dsds/vue-vuetify/styles";
      ```

      `main.ts` 파일에 `index.css` 를 포함합니다.

      ```ts
      // ... 기존 import 문들
      import './index.css';
      ```

      **5. `plugins/index.ts` (예) 수정하기**

      <Callout kind="warning">
        Vuetify 를 초기화 하는 코드가 이 파일이 아닐 수도 있습니다.

        이 때는 `createVuetify` 로 전체 검색을 해서 수정해야 할 파일을 찾으세요.
      </Callout>

      DSDS 용 `createVuetify` 로 교체합니다.

      ```ts
      @import { createVuetify } from "@dsds/vue-vuetify";

      // ... 나머지는 기존 내용 그대로
      ```
    </TabsContent>
  </TabsContents>
</Tabs>


## 개발 서버 실행하기

다음 명령을 실행하여 개발 서버를 시작할 수 있습니다.

```bash
pnpm dev
```

`App.vue` 내용을 다음 예제처럼 수정해보세요.


<Tabs defaultValue="button">
  <TabsList>
    <TabsTrigger value="button">버튼</TabsTrigger>
  </TabsList>

  <TabsContents>
    <TabsContent value="button">
      ```html
      <template>
        <v-btn @click="count++">count is {{ count }}</v-btn>
      </template>
      <script setup lang="ts">
        const count = ref(0)
      </script>
      ```
    </TabsContent>
  </TabsContents>
</Tabs>